{% extends "base.html" %}
{% load static %}

{% block title %}সাম্প্রতিক ইভেন্ট ও সংবাদ - {{ school_info.name }}{% endblock %}

{% block extra_css %}
<style>
    /* Custom scrollbar for better mobile experience */
    .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 3px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-8">
    <div class="container max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Page Header -->
        <div class="text-center mb-12">
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-4">
                সাম্প্রতিক ইভেন্ট ও সংবাদ
            </h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                আমাদের প্রতিষ্ঠানের সাম্প্রতিক কার্যক্রম, অর্জন এবং গুরুত্বপূর্ণ সংবাদসমূহ দেখুন
            </p>
            
            <!-- Decorative Line -->
            <div class="mt-6 flex justify-center">
                <div class="w-24 h-1 bg-gradient-to-r from-blue-500 to-green-500 rounded-full"></div>
            </div>
        </div>

        <!-- Filter Tabs -->
        <div class="mb-8" x-data="{ activeTab: 'all' }">
            <div class="flex flex-wrap justify-center gap-2 sm:gap-4 mb-6">
                <button @click="activeTab = 'all'" 
                        :class="activeTab === 'all' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'"
                        class="px-4 py-2 sm:px-6 sm:py-3 rounded-lg font-medium transition-colors duration-200 border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    সকল
                </button>
                <button @click="activeTab = 'EVENT'" 
                        :class="activeTab === 'EVENT' ? 'bg-green-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'"
                        class="px-4 py-2 sm:px-6 sm:py-3 rounded-lg font-medium transition-colors duration-200 border border-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2">
                    ইভেন্ট
                </button>
                <button @click="activeTab = 'NEWS'" 
                        :class="activeTab === 'NEWS' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'"
                        class="px-4 py-2 sm:px-6 sm:py-3 rounded-lg font-medium transition-colors duration-200 border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    সংবাদ
                </button>
            </div>
        </div>

        <!-- Events Grid -->
        {% if events %}
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 lg:gap-8" 
             x-data="{ activeTab: 'all' }">
            {% for event in events %}
            <div x-show="activeTab === 'all' || activeTab === '{{ event.type }}'"
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 transform scale-95"
                 x-transition:enter-end="opacity-100 transform scale-100"
                 x-transition:leave="transition ease-in duration-200"
                 x-transition:leave-start="opacity-100 transform scale-100"
                 x-transition:leave-end="opacity-0 transform scale-95"
                 class="transform">
                
                {% include 'component/common/event_card.html' with event=event %}
                
            </div>
            {% endfor %}
        </div>

        <!-- Load More Button (if pagination is needed in the future) -->
        <div class="mt-12 text-center">
            <button class="inline-flex items-center px-6 py-3 bg-white border border-gray-300 rounded-lg 
                           font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 
                           transition-colors duration-200 focus:outline-none focus:ring-2 
                           focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 
                           disabled:cursor-not-allowed">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                          d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                    </path>
                </svg>
                আরো লোড করুন
            </button>
        </div>

        {% else %}
        <!-- Empty State -->
        <div class="text-center py-16">
            <div class="max-w-md mx-auto">
                <!-- Empty State Icon -->
                <div class="mx-auto h-24 w-24 bg-gray-100 rounded-full flex items-center justify-center mb-6">
                    <svg class="h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                              d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z">
                        </path>
                    </svg>
                </div>
                
                <h3 class="text-xl font-medium text-gray-900 mb-2">
                    কোন ইভেন্ট বা সংবাদ নেই
                </h3>
                <p class="text-gray-500 mb-6">
                    এই মুহূর্তে কোন সাম্প্রতিক ইভেন্ট বা সংবাদ উপলব্ধ নেই। পরে আবার দেখুন।
                </p>
                
                <!-- Back to Home Button -->
                <a href="{% url 'web:home' %}" 
                   class="inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium 
                          rounded-lg hover:bg-blue-700 transition-colors duration-200 
                          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                              d="M10 19l-7-7m0 0l7-7m-7 7h18">
                        </path>
                    </svg>
                    হোম পেজে ফিরে যান
                </a>
            </div>
        </div>
        {% endif %}

        <!-- Back to Top Button -->
        <div class="fixed bottom-6 right-6 z-50" 
             x-data="{ showScrollTop: false }" 
             x-show="showScrollTop"
             @scroll.window="showScrollTop = (window.pageYOffset > 400)"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 transform scale-75"
             x-transition:enter-end="opacity-100 transform scale-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100 transform scale-100"
             x-transition:leave-end="opacity-0 transform scale-75">
            
            <button @click="window.scrollTo({ top: 0, behavior: 'smooth' })"
                    class="p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 
                           transition-colors duration-200 focus:outline-none focus:ring-2 
                           focus:ring-blue-500 focus:ring-offset-2">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                          d="M5 10l7-7m0 0l7 7m-7-7v18">
                    </path>
                </svg>
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Additional JavaScript for enhanced functionality
document.addEventListener('DOMContentLoaded', function() {
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Enhanced image loading with fade-in effect
    const images = document.querySelectorAll('img[data-src]');
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.classList.remove('opacity-0');
                img.classList.add('opacity-100');
                observer.unobserve(img);
            }
        });
    });

    images.forEach(img => imageObserver.observe(img));
});
</script>
{% endblock %}
